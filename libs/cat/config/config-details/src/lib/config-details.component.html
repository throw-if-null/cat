<div class="config-details-container" *subscribe="searchControl.value$; let searchText;">

    <ng-container *ngIf="config$ | async as config; else loadingConfig">

        <ng-container *ngIf="config.entries.length > 0; else noConfig">
            <h1>Config Entries</h1>
            <div class="list-controls">
                <input autofocus class="input" placeholder="Type to search..." [formControl]="searchControl">
            </div>

            <table class="table">
                <thead>
                <tr>
                    <th></th>
                    <th style="width: 30%;">KEY</th>
                    <th style="width: 30%;">VALUE</th>
                    <th>Edit</th>
                </tr>
                </thead>
                <tbody>
                <tr *ngFor="let entry of config.entries | catFilter: searchText :  ['key', 'value']">
                    <td></td>
                    <td class="editable">
                        <cat-editable (edit)="entryEdited($event, entry , 'key')">
                            <ng-template viewMode>
                                <div class="edit-value"
                                     catHighlight
                                     [searchedWord]="searchText"
                                     [content]="entry.key"
                                     [classToApply]="'search-highlight'"
                                     [setTitle]="true">
                                    {{entry.key}}
                                </div>
                            </ng-template>
                            <ng-template editMode>
                                <input #editInput
                                       class="edit-input input small edgy"
                                       [value]="entry.key"
                                       (change)="entry.key"/>
                            </ng-template>
                        </cat-editable>
                    </td>

                    <td class="editable">
                        <cat-editable (edit)="entryEdited($event, entry, 'value')">
                            <ng-template viewMode>
                                <div class="edit-value"
                                     catHighlight
                                     [setTitle]="true"
                                     [searchedWord]="searchText"
                                     [content]="entry.value"
                                     [classToApply]="'search-highlight'"
                                     [valueType]="entry.value">{{entry.value}}</div>
                            </ng-template>
                            <ng-template editMode>
                                <input #editInput
                                       class="edit-input input small edgy"
                                       [value]="entry.value"
                                       (change)="entry.value"/>
                            </ng-template>
                        </cat-editable>
                    </td>
                    <td>

                    </td>
                </tr>
                </tbody>
            </table>
        </ng-container>
        <ng-template #noConfig>
            <div class="no-configs centered">
                <h1>Seems you do not have any entries yet...</h1>
            </div>
        </ng-template>
    </ng-container>

    <ng-template #loadingConfig>
        <div class="loading-section centered">
            <h1>Reading through your configs...</h1>
            <cat-loader></cat-loader>
        </div>
    </ng-template>
</div>
